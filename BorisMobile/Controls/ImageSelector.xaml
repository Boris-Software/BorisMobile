<?xml version="1.0" encoding="utf-8" ?>
<ContentView xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="BorisMobile.Controls.ImageSelector"
             xmlns:controls="clr-namespace:BorisMobile.Controls"
             x:Name="this">
    <Grid  RowDefinitions="Auto,Auto">
        <StackLayout  Grid.Row="0" Margin="0,15,0,0">
            <StackLayout Orientation="Horizontal">
                <Label x:Name="titleLabel" Text="{Binding Title, Source={x:Reference this}}" TextColor="Black"/>
                <Label x:Name="mandatory" Text="*" TextColor="Red"></Label>
            </StackLayout>
            <!--<Button Text="click" Clicked="Button_Clicked"></Button>-->
            <ImageButton Clicked="Button_Clicked"
                BackgroundColor="Transparent" 
                Padding="0" Source="camera.png" HeightRequest="50" WidthRequest="50" Margin="0,10,0,0">
                <!--<Button.Content>
                    <Image Source="camera.png" HeightRequest="50" WidthRequest="50" Margin="0,10,0,0" InputTransparent="False">
                        --><!--<Image.GestureRecognizers>
                            <TapGestureRecognizer Tapped="TapGestureRecognizer_Tapped_2" IsEnabled="True"
                            NumberOfTapsRequired="1"></TapGestureRecognizer>
                        </Image.GestureRecognizers>--><!--
                    </Image>
                </Button.Content>-->
            </ImageButton>
        </StackLayout>

        <!-- Image Gallery -->
        <ScrollView Grid.Row="1" Orientation="Horizontal" Margin="0,10,0,0" IsVisible="{Binding HasImages}">
            <HorizontalStackLayout x:Name="imageGallery" Spacing="10">
                <!-- Images will be added here programmatically -->
            </HorizontalStackLayout>
        </ScrollView>

        <!-- Picker Popup -->
        <StackLayout x:Name="pickerPopup" BackgroundColor="#E3E5E5" Margin="5" 
                     Padding="10" HorizontalOptions="FillAndExpand"
                     HeightRequest="200" IsVisible="false">
            <StackLayout Orientation="Horizontal">
            <Label Text="Image Selector" FontAttributes="Bold" HorizontalOptions="Start"/>
            <Button Text="X" HorizontalOptions="EndAndExpand"  FontAttributes="Bold" TextColor="White" BackgroundColor="Gray" FontSize="9" Padding="0" Margin="0" CornerRadius="15 " HeightRequest="30" WidthRequest="30" Clicked="Button_Clicked_1"/>
            </StackLayout>
            <Label Text="Pick photo" VerticalTextAlignment="Center" HeightRequest="50" TextColor="Black" Margin="20,10,0,0" HorizontalOptions="FillAndExpand">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Tapped="TapGestureRecognizer_Tapped"/>
                </Label.GestureRecognizers>
            </Label>

            <Border StrokeShape="RoundRectangle 10" StrokeThickness="1"
                Stroke="White" BackgroundColor="White"
                Margin="20,5,5,10"
                HeightRequest="2"/>

            <Label Text="Capture photo" VerticalTextAlignment="Center" HeightRequest="50" TextColor="Black" Margin="20,10,0,0" HorizontalOptions="FillAndExpand">
                <Label.GestureRecognizers>
                    <TapGestureRecognizer Tapped="TapGestureRecognizer_Tapped_1"/>
                </Label.GestureRecognizers>
            </Label>
        </StackLayout>
    </Grid>
</ContentView>